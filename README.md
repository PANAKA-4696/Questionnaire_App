# Questionnaire - 整体師用問診票アプリ

これは、紙媒体で管理されていた問診票をDX化するために制作したAndroidアプリです。顧客情報と問診内容をデジタルで管理し、Google Driveへのバックアップ・復元機能を備えています。


![アプリのメイン画面](https://github.com/user-attachments/assets/1a413eca-8144-4892-8411-db7d05eea408)

## 目次
- [プロジェクトの背景](#プロジェクトの背景)
- [主な機能](#主な機能)
- [使用技術](#使用技術)
- [セットアップ方法](#セットアップ方法)
- [アプリの使い方](#アプリの使い方)
- [こだわった点](#こだわった点)
- [ER図・画面遷移図](#er図画面遷移図)
- [いただいたFBと今後の展望](#いただいたfbと今後の展望)
- [詳細資料(説明書)](#詳細資料 (Detailed Documentation))

## プロジェクトの背景
私の父は個人で整体師を営んでおり、紙媒体の問診票が100枚以上に達していました 。この業務をDX化し、管理を効率化するために本アプリを開発しました。

### Androidアプリである理由
開発にあたり、初期費用とランニングコストを最小限に抑えることを重視しました。Androidタブレットは1万円程度から購入可能であり、個人開発でコストを最も抑えられる選択肢だと考え、Androidでの開発を選択しました。

## 主な機能
- **新規顧客登録機能**: 新しいお客様の個人情報を登録します。
- **問診票（カルテ）追記機能**: 既存のお客様の問診内容を記録します。
- **顧客情報・問診内容の確認機能**: 登録された情報を一覧で確認・検索できます。
- **Google Driveへのバックアップ・復元機能**: 端末の故障や買い替えに備え、全データをGoogle Driveに安全に保存・復元できます。

## 使用技術
- **言語**: Kotlin
- **UI**: Android View System (XML)
- **アーキテクチャ**: Activity-Based (各画面をActivityとして実装)
- **非同期処理**: Kotlin Coroutines
- **API通信**:
  - Google Drive API (OAuth 2.0)
  - Google Auth Library for Android
- **JSONパース**: Gson
- **データベース**: SQLite (SQLiteOpenHelper)

- ## セットアップ方法
1. このリポジトリをクローンします。
2. Android Studioでプロジェクトを開きます。
3. **Google Drive APIのセットアップ**
   Google Driveへのバックアップ機能を利用するには、以下の手順でOAuth 2.0クライアントIDを設定する必要があります。
   - Google Cloud Platformでプロジェクトを作成し、**Google Drive APIを有効化**します。
   - **OAuth 2.0 クライアント IDを作成**します。
     - **パッケージ名**: `build.gradle.kts`に記載されている`namespace`を指定します。
     - **SHA-1 証明書フィンガープリント**: Android Studioのターミナルで `./gradlew signingReport` を実行して取得したキーを設定します。
   - 作成したプロジェクトの「OAuth同意画面」で、ご自身のGoogleアカウントを**テストユーザーとして追加**します。
4. **インターネット権限の確認**
  `AndroidManifest.xml`に`<uses-permission android:name="android.permission.INTERNET" />`が含まれていることを確認します。
5. Android Studioでビルドして実行します。

## アプリの使い方
### 1. メイン画面
![メイン画面](https://github.com/user-attachments/assets/1a413eca-8144-4892-8411-db7d05eea408)

- **新規登録**: 新規のお客様を追加するときのボタン(新規登録画面へ遷移)
- **情報追記**: 既存のお客様のカルテを記入するボタン(カルテ画面へ遷移)
- **情報を見る**: 今入っている顧客情報を見るためのボタン(顧客情報画面へ遷移)
- **GoogleDriveに保存/取得ボタン**: GoogleDriveに保存、GoogleDriveからデータを取得するボタン

### 2. 新規登録画面
![新規登録画面](https://github.com/user-attachments/assets/1c5a0c6c-a101-4812-843b-337b267a1a97)

各項目を入力し、「確認画面へ」ボタンを押します。

- **クリア**: 記入項目を全クリアするためのボタン
- **確認画面**: 確認画面へ行くためのボタン(確認画面に遷移)

### 3. 登録内容確認画面
![登録内容確認画面](https://github.com/user-attachments/assets/93917a2b-3bb4-478c-a947-ef9ff3597378)

- **登録**: この内容で登録する(保存する)ボタン
フラグメントが出てくるため、そこで、メイン画面かカルテの画面を選択し遷移できます。

- **キャンセル**: 内容が違う場合のボタン(元の画面の新規登録画面に遷移)

項目は前の画面からデータを取得し表示しています。

### 3.5. 登録完了フラグメント
![登録完了フラグメント]()

- **トップ画面へ戻る**
保存し、トップに戻る場合はこのボタンを押下(メイン画面に遷移)

- **カルテへ**
保存した情報を持って、カルテ画面にそのまま移動(カルテ画面に遷移)

### 4. 既存顧客選択画面
![既存顧客選択画面](https://github.com/user-attachments/assets/a7165937-27f1-4162-aa7f-383879587bb8)

- **リスト**
DBに保存された顧客がリストにフリガナ、IDで並びます。

今後実装するもの
-IDは連番でつけるため、最初に入れた人から順番にIDが割り振られます。

### 5. カルテ画面
![カルテ画面](https://github.com/user-attachments/assets/8e90db63-42b9-49b8-94dc-f0b668c68635)

- **次の画面へ**
質問事項の情報を保持した状態で次の画面へ遷移します。
すべての項目を埋めないと次の画面へいけません
(カルテ画面2へ遷移)

問診票のメインの部分です。
各項目を読み、しっかりと答えてもらう。

### 6. カルテ画面2
![カルテ画面2](https://github.com/user-attachments/assets/52180b30-9687-4c13-9457-a82646d143ea)

- **内容の保存**
前ページでの回答と写真内容をチェックボックスの確認を得て、DBに保存するためのボタンです(保存し、メイン画面に遷移)

免責事項を読み、同意のチェックボックスをクリックしないと問診票の登録ができません。

今後実装するもの
-写真の部分を人の体を表すものにし、それに〇を書き込めるようにしたうえで、保存ボタンを押すことで丸がついた状態の写真を保存できるようにしたい。

### 7. 顧客情報確認用選択画面
![顧客情報確認用選択画面](https://github.com/user-attachments/assets/44f64aa6-17cc-4259-b25a-7912970d7cc1)

- **リスト**
DBに保存された顧客がリストにフリガナ、IDで並びます。

今後実装するもの
-IDは連番でつけるため、最初に入れた人から順番にIDが割り振られます。

### 8. 登録情報確認画面
![登録情報確認画面](https://github.com/user-attachments/assets/2117cb16-3917-4788-b985-90a96b7259fc)

- **再登録**
この画面の内容で修正する箇所がある場合、登録内容修正画面に遷移する。(登録内容修正画面に遷移)

- **戻る**
この内容で問題ない場合元の画面に戻るボタン
(元の画面の顧客情報確認用選択画面に遷移)

DBからデータを取得し表示しています。

### 9. 保存・取得ボタン後
![保存・取得ボタン後](https://github.com/user-attachments/assets/9c1b1abf-cf3d-483c-bd36-c0006e941dc1)

- **アカウント選択**
アカウントを選択し、Googleに接続することで、GoogleDriveに接続することが出来る。
APIへの接続が必要なため、GoogleDriveAPIを利用し、GoogleAPI側でのOAuthの設定が必要である。

... (以下、各画面について同様に説明) ...

## こだわった点
このプロジェクトでは、**いかにお金をかけずにDX化を実現するか**にこだわりました。
- **低コストなハードウェア**: 安価なAndroidタブレットで運用できるよう設計しました。
- **サーバーレスなデータ管理**: Google Drive APIを利用することで、有料の外部データベースやサーバーを契約せずにデータバックアップを実現しました。
- **直感的なUI**: 父がPC操作に不慣れなため、直感的に使えるボタン名やレイアウトを意識しました。
- **継続的な開発**: 夏休みの1ヶ月間、毎日開発を続けることで、継続的な開発スキルを証明しました。

## ER図・画面遷移図
### ER図
![ER図](https://github.com/user-attachments/assets/d8e22406-de18-49ef-aa1c-afcb0cb7643c)

### 画面遷移図
![画面遷移図](https://github.com/user-attachments/assets/624d7e17-59ed-482b-b67f-6e5e188c81ef)

## いただいたFBと今後の展望
実務でご活躍されているAndroidエンジニアの方から頂いたフィードバックを元に、以下の項目を修正・改善していきます  
- [x] **READMEの作成** :ReadMEをしっかり作らないと説明書だけでは作成過程などをしっかり見てもらえない可能性がある。  
- [ ] **ファイル構造の見やすさ** :ファイル構造が画面ごとにまとまっていないため、この作品を見た人が理解しずらい、見るときに見づらいなどの可能性がある。  
- [ ] **Jetpack Composeへの対応** :授業で習ったやり方でこのアプリ開発を行っていたが、授業で習った内容が古い内容であり、現在の主流となっているUI手法として、Jetpack Composeが主流であるため、今風に変える必要がある。  (先に親に提供するため親が使用し始めて安定してきたタイミングで変更しようと考えています。)  
- [ ] **今後の学習課題**: 今回はAndroid View Systemで開発しましたが、現在の主流であるJetpack ComposeでのUI構築スキルや、最新の技術、主流を習得するため、簡単なアプリ作成などを通して学習を進めます。
  
## 製作者
田中 潮音 (Shion Tanaka)

---

## 詳細資料 (Detailed Documentation)

このプロジェクトに関するより詳細な情報（画面ごとの詳しい使い方、API設定の背景など）は、以下の説明書にまとめてあります。
情報の追記頻度が遅めのためverが違うことがありますご了承ください。

[➡️ Questionnaire説明書はこちら](https://docs.google.com/presentation/d/1xqYt9AdNYIFBNOu1SfC3jbIsnh-Z6TQV/edit?usp=drive_link&ouid=100060518070943536625&rtpof=true&sd=true)
